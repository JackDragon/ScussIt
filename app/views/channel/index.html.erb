<!--
  Bryant Chang
  Renjie Long
  Gangbaolede Li
  Jonathan Lo
  Jonathan Wu
-->
<!-- Javascript -->
<%= javascript_include_tag 'chatroom' %>  

<script type="text/javascript">
  jQuery(document).ready(function($) {
    //add_active(<%= @channel.id %>, <%= @channel.topics %>)
    
    // $(window).bind('beforeunload', function(e){
    //   delete_active(<%= @channel.id %>);
    // });
    // Binding the ENTER KEY
    $(document).bind('keypress', function(element) {
        if(element.keyCode==13){
             $('#send_button').trigger('click');
         }
    });

    id = <%= @channel.id %>
    topic = 'Main'
    get_messages(id);
    // get_userlist(id, topic);
    get_topics(id);
  });
</script>


<div class="panel-heading">
  <h3> Chat room: <%= Channel.find(@channel.id).name %></h3>
  <ul class="nav nav-pills" role="tablist">
    <li><button id="add_topic_button" onclick="click_add_topic_button()" class="btn btn-primary">Add Topics</button></li>
    <li>
      <% if !current_user.nil? %>
        <% if !current_user.favorites.exists?(:channel_id => @channel.id) %>
          <button id=<%= @channel.api_id %> class="btn btn-primary follow" >Follow</button>
        <% else %>
          <button id=<%= @channel.api_id %> class="btn btn-primary follow" >Unfollow</button>
        <% end %>
      <% end %>
    </li>
  </ul>
</div>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="col-md-3">
      <div class="topic_list" id="topicbox">
        <!-- Sample code which is generated by javascript
          <ul class="nav nav-tabs nav-stacked">
            <li><a href="#topic0" data-toggle="tab">General</a></li>
            <li><a href="#topic1" data-toggle="tab">Topic 1</a></li>
            <li><a href="#topic2" data-toggle="tab">Topic 2</a></li>
          </ul>
        -->
      </div>
    </div>
    <div class="col-md-7">
      <div class="tab-content" id="chatbox">
        <!-- Sample code which is generated by javascript
          <div class="tab-pane fade" id="topic1">
            Tab 1 content
          </div>
          <div class="tab-pane fade" id="topic2">
            Tab 2 content
          </div>
        -->
      </div>
      <div class="input_sender">
        <input id="message_input" type="text" maxlength="255" style="width: 500px; height: 35px; margin-right: 10px" placeholder="Enter your message here...">
        <button id="send_button" onclick="click_send()" class="btn btn-primary">Send</button>
      </div>
    </div>

    <div class="col-md-2">
      <div class="user_list" id="userbox">

      </div>
    </div>
  </div>
</div>


<br>
<br>
<br>


<!-- HTML -->


